<!DOCTYPE html>
<html lang="tr"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
    <meta name="description" content="Spring Boot uygulamalarÄ±nda unit, integration, controller ve servis testlerini nasÄ±l yazabileceÄŸimizi Ã¶ÄŸreneceÄŸiz.">
  

  
    <meta property="og:image" content="https://miro.medium.com/v2/resize:fit:720/format:webp/1*2nsd5m6n8XPb9fegxMVwAg.png" />
  
  <meta property="og:site_name" content="blog" />
  <meta property="og:title" content="blog" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://localhost:4000" />

  <title>Spring Boot ve Test</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Spring Boot ve Test" />
<meta name="author" content="msrexe" />
<meta property="og:locale" content="tr" />
<meta name="description" content="Spring Boot uygulamalarÄ±nda unit, integration, controller ve servis testlerini nasÄ±l yazabileceÄŸimizi Ã¶ÄŸreneceÄŸiz." />
<meta property="og:description" content="Spring Boot uygulamalarÄ±nda unit, integration, controller ve servis testlerini nasÄ±l yazabileceÄŸimizi Ã¶ÄŸreneceÄŸiz." />
<link rel="canonical" href="http://localhost:4000/spring-boot-ve-test.html" />
<meta property="og:url" content="http://localhost:4000/spring-boot-ve-test.html" />
<meta property="og:site_name" content="blog" />
<meta property="og:image" content="https://miro.medium.com/v2/resize:fit:720/format:webp/1*2nsd5m6n8XPb9fegxMVwAg.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-05-13T00:00:00+03:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://miro.medium.com/v2/resize:fit:720/format:webp/1*2nsd5m6n8XPb9fegxMVwAg.png" />
<meta property="twitter:title" content="Spring Boot ve Test" />
<script type="application/ld+json">
{"url":"http://localhost:4000/spring-boot-ve-test.html","headline":"Spring Boot ve Test","dateModified":"2024-05-13T00:00:00+03:00","datePublished":"2024-05-13T00:00:00+03:00","author":{"@type":"Person","name":"msrexe"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/spring-boot-ve-test.html"},"description":"Spring Boot uygulamalarÄ±nda unit, integration, controller ve servis testlerini nasÄ±l yazabileceÄŸimizi Ã¶ÄŸreneceÄŸiz.","@type":"BlogPosting","image":"https://miro.medium.com/v2/resize:fit:720/format:webp/1*2nsd5m6n8XPb9fegxMVwAg.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="blog" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="/assets/css/main.css" />
</head>
<body a="dark">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <div class="back-link"><a href="/">â† Ana Sayfa</a></div>

<article>
  <h1>Spring Boot ve Test</h1><p class="post-meta">
    <time datetime="2024-05-13 00:00:00 +0300">13 May 2024</time>
    <span class="read-time">ğŸ“– 4 min read</span><span class="lang-tag">ğŸŒ TR</span><span class="category">java</span></p><p class="post-description">Spring Boot uygulamalarÄ±nda unit, integration, controller ve servis testlerini nasÄ±l yazabileceÄŸimizi Ã¶ÄŸreneceÄŸiz.</p><p><img src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*2nsd5m6n8XPb9fegxMVwAg.png" alt="Spring Boot ve Test" /></p>

<p>Selamlar, gÃ¼nÃ¼mÃ¼zde test odaklÄ± geliÅŸtirme (TDD) sadece bir trend veya koduna gÃ¼venmeyen yazÄ±lÄ±mcÄ±larÄ±n kurtarÄ±cÄ±sÄ±(!) deÄŸil, aynÄ± zamanda kaliteli ve sÃ¼rdÃ¼rÃ¼lebilir yazÄ±lÄ±m geliÅŸtirme pratiÄŸinin vazgeÃ§ilmez bir parÃ§asÄ±dÄ±r. Her ne kadar zaman kÄ±sÄ±tÄ± olan geliÅŸtirme sÃ¼reÃ§lerine dahil edilmekten korkulsa da aslÄ±nda Ã§oÄŸu hatayÄ± canlÄ± ortamdan Ã¶nce bulup Ã§Ã¶zmemizi saÄŸlayarak bize ciddi bir ivme kazandÄ±rabilir. Burada kritik nokta coverage olacaktÄ±r ki bunun iÃ§in <a href="https://imantung.medium.com/testivus-unit-testing-philosophy-7f4a7f6a43da">Ãœstad Testivusâ€™un felsefesini</a> okuyabilirsiniz.</p>

<p>Bizim konumuz daha Ã§ok Spring Boot uygulamalarÄ±mÄ±zda nasÄ±l etkili testler yazabileceÄŸimiz olacak. Ã–rneklerimizde Java Ã¼zerinden ilerleyeceÄŸiz. Ufaktan baÅŸlayalÄ±m.</p>

<h4 id="1-junit-kurulumu">1. Junit Kurulumu</h4>
<p>JUnit, Java topluluÄŸu tarafÄ±ndan en geniÅŸ kabul gÃ¶ren test frameworkâ€™Ã¼dÃ¼r. Spring Boot projelerinde test yazÄ±mÄ±nÄ± kolaylaÅŸtÄ±rmak iÃ§in aÅŸaÄŸÄ±daki adÄ±mÄ± uygulayarak JUnitâ€™i ve Spring Bootâ€™un testler iÃ§in saÄŸladÄ±ÄŸÄ± isviÃ§re Ã§akÄ±mÄ±zÄ± projeye dahil edebiliriz:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;! - pom.xml dosyanÄ±za ekleyeceÄŸiniz baÄŸÄ±mlÄ±lÄ±k -&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.junit.jupiter<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>junit-jupiter<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>5.10.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<h4 id="2-unit-testler">2. Unit Testler</h4>
<p>Unit testleri, bir uygulamanÄ±n temel taÅŸlarÄ±nÄ± oluÅŸturan en kÃ¼Ã§Ã¼k kod parÃ§alarÄ±nÄ±, yani fonksiyonlarÄ± veya metotlarÄ± test etmek iÃ§in kullanÄ±lÄ±r. Bu testler sayesinde, her bir modÃ¼lÃ¼n beklenen davranÄ±ÅŸlarÄ± sergilediÄŸinden emin olabiliriz. Ã‡ok yaygÄ±n bir Ã¶rnek olacak ama hesap makinesi Ã¼stÃ¼nden gidersek toplama fonksiyonunu aÅŸaÄŸÄ±daki gibi test edebiliriz:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// CalculatorService.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorService</span> <span class="o">{</span>

 <span class="kd">public</span> <span class="kt">int</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
 <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>
 <span class="o">}</span>

<span class="o">}</span>

<span class="c1">// CalculatorServiceTest.java</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">jupiter</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">CalculatorServiceTest</span> <span class="o">{</span>

 <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">testAdd</span><span class="o">()</span> <span class="o">{</span>
 <span class="nc">CalculatorService</span> <span class="n">calculatorService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CalculatorService</span><span class="o">();</span>
 <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">calculatorService</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
 <span class="n">assertEquals</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="n">result</span><span class="o">,</span> <span class="s">"Toplama iÅŸlemi doÄŸru Ã§alÄ±ÅŸmalÄ±."</span><span class="o">);</span>
 <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>
<h4 id="3-integration-testleri">3. Integration Testleri</h4>
<p>Integration testleri, uygulamanÄ±n farklÄ± modÃ¼llerinin birlikte sorunsuz Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± doÄŸrulamak iÃ§in kritik Ã¶neme sahiptir. Bu testler, Ã¶zellikle veritabanlarÄ±, APIâ€™lar veya harici servisler gibi Ã¼Ã§Ã¼ncÃ¼ taraflarla etkileÅŸimde bulunan bileÅŸenler iÃ§in Ã¶nemlidir. Ã–rnek olarak, bir kullanÄ±cÄ±yÄ± veritabanÄ±nda doÄŸru bir ÅŸekilde sorgulayÄ±p sorgulayamadÄ±ÄŸÄ±mÄ±zÄ± test edelim:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// UserRepositoryIntegrationTest.java</span>
<span class="nd">@SpringBootTest</span> <span class="c1">// Daha spesifik contextler kullanarak her testte test etmeyeceÄŸimiz kÄ±sÄ±mlarÄ± load etmekten kaÃ§Ä±nabiliriz.</span>
<span class="nd">@AutoConfigureTestDatabase</span>
<span class="kd">class</span> <span class="nc">UserRepositoryIntegrationTest</span> <span class="o">{</span>

 <span class="nd">@Autowired</span>
 <span class="kd">private</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

<span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">testFindByUsername</span><span class="o">()</span> <span class="o">{</span>
 <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">,</span> <span class="s">"Doe"</span><span class="o">);</span>
 <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">foundUser</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByUsername</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">);</span>
 <span class="n">assertTrue</span><span class="o">(</span><span class="n">foundUser</span><span class="o">.</span><span class="na">isPresent</span><span class="o">(),</span> <span class="s">"KullanÄ±cÄ± bulunamadÄ±."</span><span class="o">);</span>
 <span class="n">assertEquals</span><span class="o">(</span><span class="s">"John"</span><span class="o">,</span> <span class="n">foundUser</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getFirstName</span><span class="o">(),</span> <span class="s">"Ä°sim alanÄ± doÄŸru olmalÄ±."</span><span class="o">);</span>
 <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h4 id="4-controller-testleri">4. Controller Testleri</h4>
<p>Web uygulamalarÄ±nda, olayÄ±n kritik kÄ±sÄ±mlarÄ±ndan biri HTTP request ve responseâ€™larÄ±nÄ± test etmek diyebiliriz. Burada bize Springâ€˜in MockMvc aracÄ±, yardÄ±mcÄ± olacak. AÅŸaÄŸÄ±daki Ã¶rnekte, bir kullanÄ±cÄ±nÄ±n bilgilerini doÄŸru ÅŸekilde alÄ±p almadÄ±ÄŸÄ±mÄ±zÄ± kontrol ediyoruz:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// UserControllerTest.java</span>
<span class="nd">@WebMvcTest</span><span class="o">(</span><span class="nc">UserController</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">UserControllerTest</span> <span class="o">{</span>

 <span class="nd">@Autowired</span>
 <span class="kd">private</span> <span class="nc">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

<span class="nd">@MockBean</span> <span class="c1">// Burada spring-boot-test iÃ§erisinde gelen mockito'yu kullanÄ±yoruz</span>
 <span class="kd">private</span> <span class="nc">UserService</span> <span class="n">userService</span><span class="o">;</span>

<span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">testGetUser</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
 <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">,</span> <span class="s">"Doe"</span><span class="o">);</span>
 <span class="n">when</span><span class="o">(</span><span class="n">userService</span><span class="o">.</span><span class="na">getUserByUsername</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">)).</span><span class="na">thenReturn</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/users/john_doe"</span><span class="o">))</span>
 <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
 <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.username"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">))</span>
 <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.firstName"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="s">"John"</span><span class="o">))</span>
 <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.lastName"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="s">"Doe"</span><span class="o">));</span>
 <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h4 id="5-servis-testleri">5. Servis Testleri</h4>
<p>Servis testleri, uygulamanÄ±n logiclerini doÄŸrulamak iÃ§in hayati Ã¶neme sahiptir. Bu testler, servis katmanÄ±ndaki iÅŸlevlerin doÄŸru Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± kontrol etmek iÃ§in tasarlanmÄ±ÅŸtÄ±r. AÅŸaÄŸÄ±da, bir user servis testini gÃ¶rebilirsiniz:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// UserServiceTest.java</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">UserServiceTest</span> <span class="o">{</span>

 <span class="nd">@MockBean</span>
 <span class="kd">private</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

<span class="nd">@Autowired</span>
 <span class="kd">private</span> <span class="nc">UserService</span> <span class="n">userService</span><span class="o">;</span>

<span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">testGetUserByUsername</span><span class="o">()</span> <span class="o">{</span>
 <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">,</span> <span class="s">"Doe"</span><span class="o">);</span>
 <span class="n">when</span><span class="o">(</span><span class="n">userRepository</span><span class="o">.</span><span class="na">findByUsername</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">)).</span><span class="na">thenReturn</span><span class="o">(</span><span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">user</span><span class="o">));</span>
<span class="nc">User</span> <span class="n">foundUser</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">getUserByUsername</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">);</span>
 <span class="n">assertEquals</span><span class="o">(</span><span class="s">"john_doe"</span><span class="o">,</span> <span class="n">foundUser</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(),</span> <span class="s">"KullanÄ±cÄ± adÄ± doÄŸru olmalÄ±."</span><span class="o">);</span>
 <span class="n">assertEquals</span><span class="o">(</span><span class="s">"John"</span><span class="o">,</span> <span class="n">foundUser</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">(),</span> <span class="s">"Ä°sim doÄŸru olmalÄ±."</span><span class="o">);</span>
 <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Doe"</span><span class="o">,</span> <span class="n">foundUser</span><span class="o">.</span><span class="na">getLastName</span><span class="o">(),</span> <span class="s">"SoyadÄ± doÄŸru olmalÄ±."</span><span class="o">);</span>
 <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h5 id="testleri-Ã§alÄ±ÅŸtÄ±rma">Testleri Ã‡alÄ±ÅŸtÄ±rma:</h5>
<p>Burada kullandÄ±ÄŸÄ±mÄ±z build ortamÄ±na baÄŸlÄ± olarak iki farklÄ± komut ile testlerimizi koÅŸturabiliriz.</p>

<p><strong>Gradle</strong> iÃ§in:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./gradlew <span class="nb">test</span>
</code></pre></div></div>
<p><strong>Maven</strong> iÃ§in:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn <span class="nb">test</span>
</code></pre></div></div>

<h4 id="sonuÃ§">SonuÃ§</h4>
<p>Bu yazÄ±da Java ve Spring Boot kullanarak uygulamalarÄ±nÄ±z iÃ§in nasÄ±l etkili testler yazabileceÄŸimizi detaylÄ± bir ÅŸekilde inceledik. Unit testlerden baÅŸlayarak, integration, controller ve servis testlerine kadar farklÄ± test tÃ¼rlerini ve bu testlerin nasÄ±l yapÄ±ldÄ±ÄŸÄ±na dair Ã¶rnekler okuduk.</p>

<p>AslÄ±nda mockâ€™lar Ã¼zerine de yeterince eÄŸilmedik ama yazÄ± Ã§ok uzadÄ± part 2 falan bakarÄ±z ona. Bir sonraki yazÄ±da gÃ¶rÃ¼ÅŸmek dileÄŸiyleâ€¦</p>
</article>
      </div>
    </main>
    
    <!-- Post filter script -->
    <script type="text/javascript" src="/assets/js/post-filter.js"></script>
  </body>
</html>